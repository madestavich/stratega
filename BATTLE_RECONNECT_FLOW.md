# Battle Reconnect System - Flow Diagram

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        –ù–û–†–ú–ê–õ–¨–ù–ò–ô –ë–Ü–ô (–±–µ–∑ reconnect)                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ì—Ä–∞–≤–µ—Ü—å A                    –°–µ—Ä–≤–µ—Ä (–ë–î)                   –ì—Ä–∞–≤–µ—Ü—å B
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ‚îÄ‚îÄ‚îÄ "–ì–û–¢–û–í–ò–ô" ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ "–ì–û–¢–û–í–ò–ô" ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ                     [–û–±–∏–¥–≤–∞ –≥–æ—Ç–æ–≤—ñ]                       ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ –ó–∞–ø—É—Å–∫ –±–æ—é ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –ó–∞–ø—É—Å–∫ –±–æ—é ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ setBattleState(true) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ setBattleState(true)‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ         [battle_started=1, player1_in_battle=1,           ‚îÇ
    ‚îÇ                player2_in_battle=1]                       ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ         üí• –ë–Ü–ô –ô–î–ï üí•       ‚îÇ         üí• –ë–Ü–ô –ô–î–ï üí•      ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –ü–µ—Ä–µ–º–æ–≥–∞ A ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ                             ‚îÇ
    ‚îÇ setBattleState(false)       ‚îÇ                             ‚îÇ
    ‚îÇ incrementRound(A)           ‚îÇ                             ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ     [battle_started=0, last_round_winner_id=A]            ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ<‚îÄ‚îÄ‚îÄ –í—ñ–∫–Ω–æ –ø–µ—Ä–µ–º–æ–∂—Ü—è ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –í—ñ–∫–Ω–æ –ø–µ—Ä–µ–º–æ–∂—Ü—è ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ      –†–µ–∂–∏–º –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∏       ‚îÇ       –†–µ–∂–∏–º –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∏      ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò


‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   –ë–Ü–ô –ó RECONNECT (–ì—Ä–∞–≤–µ—Ü—å A –æ–Ω–æ–≤–∏–≤)                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ì—Ä–∞–≤–µ—Ü—å A                    –°–µ—Ä–≤–µ—Ä (–ë–î)                   –ì—Ä–∞–≤–µ—Ü—å B
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ‚îÄ‚îÄ‚îÄ "–ì–û–¢–û–í–ò–ô" ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ "–ì–û–¢–û–í–ò–ô" ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ –ó–∞–ø—É—Å–∫ –±–æ—é ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –ó–∞–ø—É—Å–∫ –±–æ—é ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ setBattleState(true) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ setBattleState(true)‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ         üí• –ë–Ü–ô –ô–î–ï üí•       ‚îÇ         üí• –ë–Ü–ô –ô–î–ï üí•      ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ üîÑ F5 (–û–Ω–æ–≤–ª–µ–Ω–Ω—è)           ‚îÇ                             ‚îÇ
    ‚îÇ ‚ö†Ô∏è  –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è            ‚îÇ                             ‚îÇ
    ‚îÇ "–ë—ñ–π –∞–∫—Ç–∏–≤–Ω–∏–π!"             ‚îÇ                             ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ [–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î]               ‚îÇ                             ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ üîÑ Reload...                ‚îÇ                             ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ start() ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ                             ‚îÇ
    ‚îÇ checkBattleState() ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ                             ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ [battle_started=1] ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                             ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ handleBattleDisconnection() ‚îÇ                             ‚îÇ
    ‚îÇ setBattleState(false) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ                             ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ     [player1_in_battle=0]   ‚îÇ                             ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ üñ•Ô∏è  OVERLAY                 ‚îÇ                             ‚îÇ
    ‚îÇ "–û—á—ñ–∫—É–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è..."  ‚îÇ                             ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ ‚è±Ô∏è  Polling (–∫–æ–∂–Ω—ñ 2 —Å–µ–∫)   ‚îÇ         üí• –ë–Ü–ô –ô–î–ï üí•      ‚îÇ
    ‚îÇ checkBattleCompletion() ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ                             ‚îÇ
    ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ [not complete] ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                             ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ checkBattleCompletion() ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ                             ‚îÇ
    ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ [not complete] ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                             ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ                             ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –ü–µ—Ä–µ–º–æ–≥–∞ B ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
    ‚îÇ                             ‚îÇ<‚îÄ‚îÄ‚îÄ setBattleState(false) ‚îÄ‚îÄ‚îÇ
    ‚îÇ                             ‚îÇ<‚îÄ‚îÄ‚îÄ incrementRound(B) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ      [battle_started=0, player1_in_battle=0,              ‚îÇ
    ‚îÇ       player2_in_battle=0, winner_id=B]                   ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ checkBattleCompletion() ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ                             ‚îÇ
    ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ [COMPLETE!] ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                             ‚îÇ
    ‚îÇ winner_id = B               ‚îÇ                             ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ hideOverlay()               ‚îÇ                             ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ<‚îÄ‚îÄ‚îÄ –í—ñ–∫–Ω–æ –ø–µ—Ä–µ–º–æ–∂—Ü—è ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –í—ñ–∫–Ω–æ –ø–µ—Ä–µ–º–æ–∂—Ü—è ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ
    ‚îÇ     "–ü–µ—Ä–µ–º—ñ–≥: B"            ‚îÇ         "–ü–µ—Ä–µ–º—ñ–≥: B"        ‚îÇ
    ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îÇ      –†–µ–∂–∏–º –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∏       ‚îÇ       –†–µ–∂–∏–º –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∏      ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò


‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         –ö–õ–Æ–ß–û–í–Ü –ú–û–ú–ï–ù–¢–ò                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

1Ô∏è‚É£  setBattleState(true) –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ –±–æ—é
    ‚îî‚îÄ> –ü–æ–∑–Ω–∞—á–∞—î –≥—Ä–∞–≤—Ü—è —è–∫ "–≤ –±–æ—é" –≤ –ë–î

2Ô∏è‚É£  beforeunload warning
    ‚îî‚îÄ> –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º: "–ë—ñ–π –∞–∫—Ç–∏–≤–Ω–∏–π!"

3Ô∏è‚É£  checkBattleState() –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
    ‚îî‚îÄ> –ü–µ—Ä–µ–≤—ñ—Ä—è—î —á–∏ –Ω–µ reconnect —Ü–µ –ø—ñ–¥ —á–∞—Å –±–æ—é

4Ô∏è‚É£  –Ø–∫—â–æ battle_started=1 ‚Üí handleBattleDisconnection()
    ‚îî‚îÄ> –ü–æ–∫–∞–∑—É—î overlay + polling –∫–æ–∂–Ω—ñ 2 —Å–µ–∫

5Ô∏è‚É£  setBattleState(false) –∫–æ–ª–∏ –∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è –±—ñ–π
    ‚îî‚îÄ> –ü–æ–∑–Ω–∞—á–∞—î —â–æ –≥—Ä–∞–≤–µ—Ü—å –±—ñ–ª—å—à–µ –Ω–µ –≤ –±–æ—é

6Ô∏è‚É£  checkBattleCompletion() polling
    ‚îî‚îÄ> –ü–µ—Ä–µ–≤—ñ—Ä—è—î —á–∏ –æ–±–∏–¥–≤–∞ –≥—Ä–∞–≤—Ü—ñ –≤–∏–π—à–ª–∏ –∑ –±–æ—é

7Ô∏è‚É£  incrementRound() —Å–∫–∏–¥–∞—î battle state
    ‚îî‚îÄ> battle_started=0, –æ–±–∏–¥–≤–∞ –≥—Ä–∞–≤—Ü—ñ not in battle, winner_id –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

8Ô∏è‚É£  showWinnerModal() –¥–ª—è –æ–±–æ—Ö
    ‚îî‚îÄ> –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø–æ–∫–∞–∑—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±–æ–º –≥—Ä–∞–≤—Ü—è–º (–±–µ—Ä—É—á–∏ winner_id –∑ –ë–î)
```

## –°—Ç–∞–Ω–∏ –≤ –ë–î:

| –°—Ç–∞–Ω                 | battle_started | p1_in_battle | p2_in_battle |
| -------------------- | -------------- | ------------ | ------------ |
| –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ (–¥–æ –±–æ—é)  | 0              | 0            | 0            |
| –û–±–∏–¥–≤–∞ –≤ –±–æ—é         | 1              | 1            | 1            |
| A reconnect, B –≤ –±–æ—é | 1              | 0            | 1            |
| –ë—ñ–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ –æ–±–æ–º–∞  | 0              | 0            | 0            |

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø–µ—Ä–µ—Ö–æ–¥–∏:

```
–ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ ‚Üí startGame() ‚Üí –û–±–∏–¥–≤–∞ –≤ –±–æ—é

–û–±–∏–¥–≤–∞ –≤ –±–æ—é ‚Üí endRound() ‚Üí –ë—ñ–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ

–û–±–∏–¥–≤–∞ –≤ –±–æ—é + A reconnect ‚Üí A –æ—á—ñ–∫—É—î + B –≤ –±–æ—é

A –æ—á—ñ–∫—É—î + B –≤ –±–æ—é ‚Üí B endRound() ‚Üí –ë—ñ–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ ‚Üí showWinner –æ–±–æ–º
```
